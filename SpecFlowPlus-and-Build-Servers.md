You can set up SpecFlow+ Runner to execute your tests whenever a build is created on your build server. The following covers the settings necessary to use SpecFlow+ with either TFS 2015 or TeamCity. For more information on the build settings in either TFS or TeamCity, please refer to the respective documentation.

#TFS
By default, TFS looks for a profile named TFS.srprofile to execute your tests; if none is found, TFS uses default.srprofile instead. If you have changed the name of your profile, you need to enter the name of your profile in your [[run settings|Configuring-SpecFlowPlus-Runner-Visual-Studio-Test-Explorer-Integration#specflow-runner-settings]] (`<Profile>` element) and enter the path to your `.runsettings` file in the **Run Settings File** field.

##TFS 2015

*Note: General information on running tests with your builds in TFS can be found [[here|https://msdn.microsoft.com/library/vs/alm/test/continuous-testing/test-build]].*

To configure your build process in TFS 2015 to execute tests using SpecFlow+ Runner:

1. Open TFS and switch to your build definition.
1. Click on **Add build step** to add a new step to the build definition. Click on **Test** in the list of categories and click on **Add** next to "Visual Studio Test".
1. Configure the build step as follows:  
  * Enter the path to your **Test Assembly**
  * If you are using both MSTest and SpecFlow+ Runner, enter the path to NuGet package folder in the **Path to Custom Test Adapters** field. If you do not enter the path here, only your MSTest tests will be executed as TFS cannot find the SpecFlow+Runner test adapter.
  * Enter the name of your .srprofile file in the **Run Settings File** field if the name is not `TFS.srprofile` or `default.srprofile` (see above).
1. Save your changes.

Once the test run is complete, links to the report file and logs generated by SpecFlow+ Runner are available from the test run as attachments.

## TFS and XAML
To configure your build process in TFS with XAML:

1. Define your build definition as described [[here|https://msdn.microsoft.com/en-us/library/ms181716%28v=vs.120%29.aspx]]
1. In order for the tests to execute, the binaries (DLLs in the various SpecFlow packages) need to be available to the build agent. Either:
  * Enable NuGet restore, in which cases the files are downloaded automatically
  * Check in the DLLs in the corresponding SpecFlow, SpecRun and SpecFlow+ packages. These DLLs are located in the corresponding sub-folders of your solution's packages directory.
1. Enter the name of your .srprofile file in the **Run Settings File** field if the name is not `TFS.srprofile` or `default.srprofile` (see above).

###Known Issues

* The build agents cache the test adapters, which means that the last test adapter to be used is used for each build. You can thus only use a single SpecFlow+ Runner version with the same build agent, as the cached version is always used. If you want to use a different version of SpecFlow+ Runner for different builds, you need to define separate build agents.
* Upgrading SpecFlow to a newer version requires a restart to purge the cache.



#TeamCity

*Note: General information on configuring build steps in TeamCity can be found [[here|https://confluence.jetbrains.com/display/TCD9/Configuring+Build+Steps]].*

To configure your build process in TeamCity to execute tests using SpecFlow+ Runner:

1. Open your project's build steps.
2. Click on **Add build step**.
3. Choose "Command Line" from the dialogue.
4. Configure the build step as follows:  
  * **Run:** Executable with parameters
  * **Command executable:** Enter the path to SpecRun.exe here
  * **Command parameters:** Enter the command line parameters for SpecRun.exe here. Use the `BuildServerRun` option and include `/buildserver:teamcity`.  
  Information on executing command lines in TeamCity is available [[here|https://confluence.jetbrains.com/display/TCD9/Command+Line]]. More details on the SpecFlow+ Runner's command line options can be found [[here|https://github.com/techtalk/SpecFlowPlus-Resources/wiki/SpecFlowPlus-Runner-Command-Line]].
5. Click on **Save**.